<%#= form_tag posts_path, :method => 'get' do %>
  <p>
    <%#= text_field_tag :starts_with, params[:starts_with] %>
    <%#= submit_tag "Search", :name => nil %>
  </p>
<%# end %>

<% set_meta_tags title: 'Пляж', description: 'Журнал Surface'%>
<% set_meta_tags og: {
    title: ['Журнал Surface']
}  %>

<%= react_component 'M_CategoryMenu', { categories: @categories, category: @category } %>
<%= react_component 'O_PostsPreview', { posts: @posts, post: @post, categories: @categories, category: @category } %>

<br>

<table>
    <tbody>
      <% @posts.each do |post| %>
        <tr>

          <td><%= link_to '👀', post %></td>
          <td>
            <%= react_component 'M_PostPreview', { posts: @posts, post: @post, categories: @categories, category: @category} %>
          </td>
  				<td>
  					 <%#= link_to(image_tag(post.image.thumb.url, alt: 'Image'), post.image.url, target: '_blank') if post.image? %>
  				</td>
  				 <td>
  					 <%#= post.title %>
  				 </td>
  				 <td>
  					 <%#= post.user.username %>
  				</td>
  				<td>
  				<%# if post.category_id? %>
  					<span>
  					<%#= post.category.name %>
  					</span>
  				<%# end %>
  				</td>

          <%# if post.tagline? %>
            <td><%#= render_with_hashtags(post.tagline) %></td>
          <%# end %>

  				<td><%#= post.post_type.name %></td>

  				<td>
            <div class="activity--inPost">
              <div class="liking">
                <%#= react_component 'A_Likes', { post: @post, likes: @post.likes, current_user_id: current_user.id } %>
              </div>

              <div class="favs">
                <%#= react_component 'A_Favorites', { post: @post, favorites: @post.favorites, current_user_id: current_user.id } %>
              </div>
            </div>
          </td>

          <td><%#= post.likes.count %> <%#= (post.likes.count) == 1 ? '💙' : '💙'%></td>
          <td><%#= post.coments.count %> <%#= (post.coments.count) == 1 ? ' 💬' : ' 💬'%></td>
          <td><%#= post.favorites.count %> <%#= (post.favorites.count) == 1 ? '💙' : '💙'%></td>


  				<!-- open view to delete and edit btn for admin in blog -->
  				<% if user_signed_in? && current_user.isadmin == true %>
          <td>
            <%= react_component 'M_FunctionList', { post: @post} %>
          </td>
      			<td>
              <%#= link_to '🛠', edit_post_path(@post) %>
            </td>

    				<td>
              <%#= link_to '🗑', post, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
  				<% end %>

        </tr>
      <% end %>
  </tbody>
</table>


<%#= link_to 'New Post', new_post_path %>
<%#= link_to 'New Category', new_category_path %>
