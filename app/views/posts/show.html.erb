<div className="post-view-wrapper">
  <% set_meta_tags title: @post.title, description: @post.category.name %>

  <%= react_component 'O_PostView', {category: @category, post: @post, posts: @posts} %>

  <div class="post-final">
    <div class="post-final-items">
    <% if user_signed_in? %>
    <% pre_like = @post.likes.find { |like| like.user_id == current_user.id} %>

      <div class="activity--inPost">
        <div class="liking">
          <%== react_component 'A_Likes', { post: @post, likes: @post.likes, current_user_id: current_user.id } %>
        </div>

        <div class="favs">
          <%= react_component 'A_Favorites', { post: @post, favorites: @post.favorites, current_user_id: current_user.id } %>
        </div>
      </div>
    <% end %>
      <%= react_component 'M_PostFinal', {post: @post} %>
    </div>
  </div>


<div class="coments-section">

  <div class="pre-comment-info">
    <%= react_component 'A_CommentAmount'%>

    <div class="comments-topic-block">
      <div class="">
        <%= react_component 'A_Avatar', { user: current_user }, class: 'avatar--default-medium' %>
      </div>

      <div class="comments-author-topic">
        <%= react_component 'A_PostAuthor', {post: @post} %>
        <%= react_component 'A_PostTopic', {post: @post} %>
      </div>
    </div>
  </div>
  <div class="post-coments">

    <% if user_signed_in? %>
      <%= render "coments/form" %>
    <% else %>
    <p>Please <%= link_to 'login', new_user_session_path %> or <%= link_to 'register', new_user_registration_path %> to comment.</p>
    <% end %>

    <%= render @post.coments %>

    <%= react_component 'M_AuthorQuestion' %>
    <%= react_component 'O_PostsEnding', { posts: @posts, post: @post, categories: @categories, category: @category } %>
  </div>
</div>

<table>
    <tbody>
      <% @posts.each do |post| %>
        <tr>

          <td><%= link_to 'ðŸ‘€', post %></td>
          <td>
            <%= react_component 'M_PostPreview', { post: @post, posts: @posts} %>
          </td>
  				<td>
  					 <%#= link_to(image_tag(post.image.thumb.url, alt: 'Image'), post.image.url, target: '_blank') if post.image? %>
  				</td>
  				 <td>
  					 <%#= post.title %>
  				 </td>
  				 <td>
  					 <%#= post.user.username %>
  				</td>
  				<td>
  				<%# if post.category_id? %>
  					<span>
  					<%#= post.category.name %>
  					</span>
  				<%# end %>
  				</td>

          <%# if post.tagline? %>
            <td><%#= render_with_hashtags(post.tagline) %></td>
          <%# end %>

  				<td><%#= post.post_type.name %></td>
  				<td>
            <div class="activity--inPost">
              <div class="liking">
                <%== react_component 'A_Likes', { post: @post, likes: @post.likes, current_user_id: current_user.id } %>
              </div>

              <div class="favs">
                <%= react_component 'A_Favorites', { post: @post, favorites: @post.favorites, current_user_id: current_user.id } %>
              </div>
            </div>
          </td>

          <td><%#= post.likes.count %> <%#= (post.likes.count) == 1 ? 'ðŸ’™' : 'ðŸ’™'%></td>
          <td><%#= post.coments.count %> <%#= (post.coments.count) == 1 ? ' ðŸ’¬' : ' ðŸ’¬'%></td>
          <td><%#= post.favorites.count %> <%#= (post.favorites.count) == 1 ? 'ðŸ’™' : 'ðŸ’™'%></td>


  				<!-- open view to delete and edit btn for admin in blog -->
  				<% if user_signed_in? && current_user.isadmin == true %>
          <td>
            <%= react_component 'M_FunctionList', { post: @post} %>
          </td>
      			<td>
              <%#= link_to 'ðŸ› ', edit_post_path(@post) %>
            </td>

    				<td>
              <%#= link_to 'ðŸ—‘', post, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
  				<% end %>

        </tr>
      <% end %>
  </tbody>
</table>

<div class="final-admin-actions">
  <% if user_signed_in? && current_user.isadmin == true %>
    <td><%= link_to 'Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ', edit_post_path(@post), class: 'btn btn--main' %></td>
    <td><%= link_to 'Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ', @post, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn--secondary'  %></td>
  <% end %>
</div>
