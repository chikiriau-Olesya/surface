<% unless coment.parent_id || !coment.persisted? %>
  <div class="card">
    <div class="card-body">
      <div>
        <div class="coment-line">
        <% if coment.user_id %>
          <%= react_component 'A_Avatar', { user: current_user }, class: 'avatar--default-small' if coment.user.image? %>

          <%#= image_tag(coment.user.image.small_thumb.url, alt: 'Image') if coment.user.image? %>
        <% end %>
          <%= User.find(coment.user_id).username %>
        </div>
      </div>


    <%= coment.body %>
    <%= link_to 'Ответить', new_post_coment_path(@post, parent_id: coment.id), remote: true, class: 'd-block' %>
    <% if user_signed_in? && current_user.id == coment.user_id  %>
      <p>
    <%#= link_to 'Destroy Comment', [coment.post, coment],
                 :confirm => 'Are you sure?',
                 :method => :delete %>
       <%= link_to 'Удалить', coment, method: :delete, data: { confirm: 'Вы уверены, что хотите удалить комментарий?' } %>
      </p>
    <% end %>
    </div>
  </div>
  <% if coment.replies.any? %>
    <% coment.replies.each do |reply| %>
      <%= render partial: 'coments/reply', locals: { reply: reply } %>
    <% end %>
  <% end %>
  <div id="reply-form-<%= coment.id %>"></div>
<% end %>
